"use strict";

var _regeneratorRuntime = require("babel-runtime/regenerator")["default"];

var _Object$assign = require("babel-runtime/core-js/object/assign")["default"];

Object.defineProperty(exports, "__esModule", {
    value: true
});

var commands = {},
    helpers = {};

/*
 * 点击lua元素 2017/4/24
 *
 */
commands.luaClick = function callee$0$0(elementId) {
    return _regeneratorRuntime.async(function callee$0$0$(context$1$0) {
        while (1) switch (context$1$0.prev = context$1$0.next) {
            case 0:
                context$1$0.next = 2;
                return _regeneratorRuntime.awrap(this.testbundle.sendAction("element:click", { elementId: elementId }));

            case 2:
                return context$1$0.abrupt("return", context$1$0.sent);

            case 3:
            case "end":
                return context$1$0.stop();
        }
    }, null, this);
};

/*
 * 获取元素属性 (文本: text)
 *
 */
commands.getLuaAttribute = function callee$0$0(attribute, elementId) {
    var p;
    return _regeneratorRuntime.async(function callee$0$0$(context$1$0) {
        while (1) switch (context$1$0.prev = context$1$0.next) {
            case 0:
                p = { attribute: attribute, elementId: elementId };
                context$1$0.next = 3;
                return _regeneratorRuntime.awrap(this.testbundle.sendAction("element:getAttribute", p));

            case 3:
                return context$1$0.abrupt("return", context$1$0.sent);

            case 4:
            case "end":
                return context$1$0.stop();
        }
    }, null, this);
};

/*
 * 设置元素的值 (文本)
 *
 */
commands.setLuaValue = function callee$0$0(keys, elementId) {
    return _regeneratorRuntime.async(function callee$0$0$(context$1$0) {
        while (1) switch (context$1$0.prev = context$1$0.next) {
            case 0:
                context$1$0.next = 2;
                return _regeneratorRuntime.awrap(this.setLuaElementValue(keys, elementId, false));

            case 2:
                return context$1$0.abrupt("return", context$1$0.sent);

            case 3:
            case "end":
                return context$1$0.stop();
        }
    }, null, this);
};

/*
 *  元素是否displaed
 *
 */
commands.luaElementDisplayed = function callee$0$0(elementId) {
    return _regeneratorRuntime.async(function callee$0$0$(context$1$0) {
        while (1) switch (context$1$0.prev = context$1$0.next) {
            case 0:
                context$1$0.next = 2;
                return _regeneratorRuntime.awrap(this.getLuaAttribute("displayed", elementId));

            case 2:
                context$1$0.t0 = context$1$0.sent;
                return context$1$0.abrupt("return", context$1$0.t0 === 'true');

            case 4:
            case "end":
                return context$1$0.stop();
        }
    }, null, this);
};

/*
 * 元素是否enabled
 *
 */
commands.luaElementEnabled = function callee$0$0(elementId) {
    return _regeneratorRuntime.async(function callee$0$0$(context$1$0) {
        while (1) switch (context$1$0.prev = context$1$0.next) {
            case 0:
                context$1$0.next = 2;
                return _regeneratorRuntime.awrap(this.getLuaAttribute("enabled", elementId));

            case 2:
                context$1$0.t0 = context$1$0.sent;
                return context$1$0.abrupt("return", context$1$0.t0 === 'true');

            case 4:
            case "end":
                return context$1$0.stop();
        }
    }, null, this);
};

/*
 * 元素是否selected
 *
 */
commands.luaElementSelected = function callee$0$0(elementId) {
    return _regeneratorRuntime.async(function callee$0$0$(context$1$0) {
        while (1) switch (context$1$0.prev = context$1$0.next) {
            case 0:
                context$1$0.next = 2;
                return _regeneratorRuntime.awrap(this.getLuaAttribute("selected", elementId));

            case 2:
                context$1$0.t0 = context$1$0.sent;
                return context$1$0.abrupt("return", context$1$0.t0 === 'true');

            case 4:
            case "end":
                return context$1$0.stop();
        }
    }, null, this);
};

/*
 * 元素 location( x, y)
 *
 */
commands.getLuaLocation = function callee$0$0(elementId) {
    return _regeneratorRuntime.async(function callee$0$0$(context$1$0) {
        while (1) switch (context$1$0.prev = context$1$0.next) {
            case 0:
                context$1$0.next = 2;
                return _regeneratorRuntime.awrap(this.testbundle.sendAction("element:getLocation", { elementId: elementId }));

            case 2:
                return context$1$0.abrupt("return", context$1$0.sent);

            case 3:
            case "end":
                return context$1$0.stop();
        }
    }, null, this);
};

commands.getLuaLocationInView = function callee$0$0(elementId) {
    return _regeneratorRuntime.async(function callee$0$0$(context$1$0) {
        while (1) switch (context$1$0.prev = context$1$0.next) {
            case 0:
                context$1$0.next = 2;
                return _regeneratorRuntime.awrap(this.getLuaLocation(elementId));

            case 2:
                return context$1$0.abrupt("return", context$1$0.sent);

            case 3:
            case "end":
                return context$1$0.stop();
        }
    }, null, this);
};

/*
 * 元素 size( width, height)
 */
commands.getLuaSize = function callee$0$0(elementId) {
    return _regeneratorRuntime.async(function callee$0$0$(context$1$0) {
        while (1) switch (context$1$0.prev = context$1$0.next) {
            case 0:
                context$1$0.next = 2;
                return _regeneratorRuntime.awrap(this.testbundle.sendAction("element:getSize", { elementId: elementId }));

            case 2:
                return context$1$0.abrupt("return", context$1$0.sent);

            case 3:
            case "end":
                return context$1$0.stop();
        }
    }, null, this);
};

helpers.setLuaElementValue = function callee$0$0(keys, elementId) {
    var replace = arguments.length <= 2 || arguments[2] === undefined ? false : arguments[2];
    var text, params;
    return _regeneratorRuntime.async(function callee$0$0$(context$1$0) {
        while (1) switch (context$1$0.prev = context$1$0.next) {
            case 0:
                text = keys;

                if (keys instanceof Array) {
                    text = keys.join("");
                }
                params = {
                    elementId: elementId,
                    text: text,
                    replace: replace,
                    unicodeKeyboard: this.opts.unicodeKeyboard
                };
                context$1$0.next = 5;
                return _regeneratorRuntime.awrap(this.testbundle.sendAction("element:setText", params));

            case 5:
                return context$1$0.abrupt("return", context$1$0.sent);

            case 6:
            case "end":
                return context$1$0.stop();
        }
    }, null, this);
};

_Object$assign(commands, helpers);
exports["default"] = commands;
module.exports = exports["default"];
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9jb21tYW5kcy9sdWEvZWxlbWVudC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQ0EsSUFBSSxRQUFRLEdBQUcsRUFBRTtJQUFFLE9BQU8sR0FBRyxFQUFFLENBQUM7Ozs7OztBQU1oQyxRQUFRLENBQUMsUUFBUSxHQUFHLG9CQUFnQixTQUFTOzs7OztpREFDNUIsSUFBSSxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsZUFBZSxFQUFFLEVBQUMsU0FBUyxFQUFULFNBQVMsRUFBQyxDQUFDOzs7Ozs7Ozs7O0NBQ3hFLENBQUM7Ozs7OztBQU1GLFFBQVEsQ0FBQyxlQUFlLEdBQUcsb0JBQWdCLFNBQVMsRUFBRSxTQUFTO1FBQ3ZELENBQUM7Ozs7QUFBRCxpQkFBQyxHQUFHLEVBQUMsU0FBUyxFQUFULFNBQVMsRUFBRSxTQUFTLEVBQVQsU0FBUyxFQUFDOztpREFDakIsSUFBSSxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsc0JBQXNCLEVBQUUsQ0FBQyxDQUFDOzs7Ozs7Ozs7O0NBQ3JFLENBQUE7Ozs7OztBQU1ELFFBQVEsQ0FBQyxXQUFXLEdBQUcsb0JBQWdCLElBQUksRUFBRSxTQUFTOzs7OztpREFDckMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLElBQUksRUFBRSxTQUFTLEVBQUUsS0FBSyxDQUFDOzs7Ozs7Ozs7O0NBQy9ELENBQUE7Ozs7OztBQU1ELFFBQVEsQ0FBQyxtQkFBbUIsR0FBRyxvQkFBZ0IsU0FBUzs7Ozs7aURBQ3ZDLElBQUksQ0FBQyxlQUFlLENBQUMsV0FBVyxFQUFFLFNBQVMsQ0FBQzs7Ozt1RUFBSyxNQUFNOzs7Ozs7O0NBQ3ZFLENBQUE7Ozs7OztBQU1ELFFBQVEsQ0FBQyxpQkFBaUIsR0FBRyxvQkFBZ0IsU0FBUzs7Ozs7aURBQ3JDLElBQUksQ0FBQyxlQUFlLENBQUMsU0FBUyxFQUFFLFNBQVMsQ0FBQzs7Ozt1RUFBSyxNQUFNOzs7Ozs7O0NBQ3JFLENBQUE7Ozs7OztBQU1ELFFBQVEsQ0FBQyxrQkFBa0IsR0FBRyxvQkFBZ0IsU0FBUzs7Ozs7aURBQ3RDLElBQUksQ0FBQyxlQUFlLENBQUMsVUFBVSxFQUFFLFNBQVMsQ0FBQzs7Ozt1RUFBSyxNQUFNOzs7Ozs7O0NBQ3RFLENBQUE7Ozs7OztBQU1ELFFBQVEsQ0FBQyxjQUFjLEdBQUcsb0JBQWUsU0FBUzs7Ozs7aURBQ2pDLElBQUksQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLHFCQUFxQixFQUFFLEVBQUMsU0FBUyxFQUFULFNBQVMsRUFBQyxDQUFDOzs7Ozs7Ozs7O0NBQzlFLENBQUE7O0FBRUQsUUFBUSxDQUFDLG9CQUFvQixHQUFHLG9CQUFnQixTQUFTOzs7OztpREFDeEMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxTQUFTLENBQUM7Ozs7Ozs7Ozs7Q0FDOUMsQ0FBQTs7Ozs7QUFLRCxRQUFRLENBQUMsVUFBVSxHQUFHLG9CQUFnQixTQUFTOzs7OztpREFDOUIsSUFBSSxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsaUJBQWlCLEVBQUUsRUFBQyxTQUFTLEVBQVQsU0FBUyxFQUFDLENBQUM7Ozs7Ozs7Ozs7Q0FDMUUsQ0FBQTs7QUFFRCxPQUFPLENBQUMsa0JBQWtCLEdBQUcsb0JBQWdCLElBQUksRUFBRSxTQUFTO1FBQUUsT0FBTyx5REFBRyxLQUFLO1FBQ3JFLElBQUksRUFJSixNQUFNOzs7O0FBSk4sb0JBQUksR0FBRyxJQUFJOztBQUNmLG9CQUFJLElBQUksWUFBWSxLQUFLLEVBQUU7QUFDdkIsd0JBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO2lCQUN4QjtBQUNHLHNCQUFNLEdBQUc7QUFDVCw2QkFBUyxFQUFULFNBQVM7QUFDVCx3QkFBSSxFQUFKLElBQUk7QUFDSiwyQkFBTyxFQUFQLE9BQU87QUFDUCxtQ0FBZSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsZUFBZTtpQkFDN0M7O2lEQUNZLElBQUksQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLGlCQUFpQixFQUFFLE1BQU0sQ0FBQzs7Ozs7Ozs7OztDQUNyRSxDQUFDOztBQUlGLGVBQWMsUUFBUSxFQUFFLE9BQU8sQ0FBQyxDQUFDO3FCQUNsQixRQUFRIiwiZmlsZSI6ImxpYi9jb21tYW5kcy9sdWEvZWxlbWVudC5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG5sZXQgY29tbWFuZHMgPSB7fSwgaGVscGVycyA9IHt9O1xyXG5cclxuLypcclxuICog54K55Ye7bHVh5YWD57SgIDIwMTcvNC8yNFxyXG4gKlxyXG4gKi9cclxuY29tbWFuZHMubHVhQ2xpY2sgPSBhc3luYyBmdW5jdGlvbiAoZWxlbWVudElkKSB7XHJcbiAgICByZXR1cm4gYXdhaXQgdGhpcy50ZXN0YnVuZGxlLnNlbmRBY3Rpb24oXCJlbGVtZW50OmNsaWNrXCIsIHtlbGVtZW50SWR9KTtcclxufTtcclxuXHJcbi8qXHJcbiAqIOiOt+WPluWFg+e0oOWxnuaApyAo5paH5pysOiB0ZXh0KVxyXG4gKlxyXG4gKi9cclxuY29tbWFuZHMuZ2V0THVhQXR0cmlidXRlID0gYXN5bmMgZnVuY3Rpb24gKGF0dHJpYnV0ZSwgZWxlbWVudElkKSB7XHJcbiAgICBsZXQgcCA9IHthdHRyaWJ1dGUsIGVsZW1lbnRJZH07XHJcbiAgICByZXR1cm4gYXdhaXQgdGhpcy50ZXN0YnVuZGxlLnNlbmRBY3Rpb24oXCJlbGVtZW50OmdldEF0dHJpYnV0ZVwiLCBwKTtcclxufVxyXG5cclxuLypcclxuICog6K6+572u5YWD57Sg55qE5YC8ICjmlofmnKwpXHJcbiAqXHJcbiAqL1xyXG5jb21tYW5kcy5zZXRMdWFWYWx1ZSA9IGFzeW5jIGZ1bmN0aW9uIChrZXlzLCBlbGVtZW50SWQpIHtcclxuICAgIHJldHVybiBhd2FpdCB0aGlzLnNldEx1YUVsZW1lbnRWYWx1ZShrZXlzLCBlbGVtZW50SWQsIGZhbHNlKTtcclxufVxyXG5cclxuLypcclxuICogIOWFg+e0oOaYr+WQpmRpc3BsYWVkXHJcbiAqXHJcbiAqL1xyXG5jb21tYW5kcy5sdWFFbGVtZW50RGlzcGxheWVkID0gYXN5bmMgZnVuY3Rpb24gKGVsZW1lbnRJZCkge1xyXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuZ2V0THVhQXR0cmlidXRlKFwiZGlzcGxheWVkXCIsIGVsZW1lbnRJZCkgPT09ICd0cnVlJztcclxufVxyXG5cclxuLypcclxuICog5YWD57Sg5piv5ZCmZW5hYmxlZFxyXG4gKlxyXG4gKi9cclxuY29tbWFuZHMubHVhRWxlbWVudEVuYWJsZWQgPSBhc3luYyBmdW5jdGlvbiAoZWxlbWVudElkKSB7XHJcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5nZXRMdWFBdHRyaWJ1dGUoXCJlbmFibGVkXCIsIGVsZW1lbnRJZCkgPT09ICd0cnVlJztcclxufVxyXG5cclxuLypcclxuICog5YWD57Sg5piv5ZCmc2VsZWN0ZWRcclxuICpcclxuICovXHJcbmNvbW1hbmRzLmx1YUVsZW1lbnRTZWxlY3RlZCA9IGFzeW5jIGZ1bmN0aW9uIChlbGVtZW50SWQpIHtcclxuICAgIHJldHVybiBhd2FpdCB0aGlzLmdldEx1YUF0dHJpYnV0ZShcInNlbGVjdGVkXCIsIGVsZW1lbnRJZCkgPT09ICd0cnVlJztcclxufVxyXG5cclxuLypcclxuICog5YWD57SgIGxvY2F0aW9uKCB4LCB5KVxyXG4gKlxyXG4gKi9cclxuY29tbWFuZHMuZ2V0THVhTG9jYXRpb24gPSBhc3luYyBmdW5jdGlvbihlbGVtZW50SWQpIHtcclxuICAgIHJldHVybiBhd2FpdCB0aGlzLnRlc3RidW5kbGUuc2VuZEFjdGlvbihcImVsZW1lbnQ6Z2V0TG9jYXRpb25cIiwge2VsZW1lbnRJZH0pO1xyXG59XHJcblxyXG5jb21tYW5kcy5nZXRMdWFMb2NhdGlvbkluVmlldyA9IGFzeW5jIGZ1bmN0aW9uIChlbGVtZW50SWQpIHtcclxuICAgIHJldHVybiBhd2FpdCB0aGlzLmdldEx1YUxvY2F0aW9uKGVsZW1lbnRJZCk7XHJcbn1cclxuXHJcbi8qXHJcbiAqIOWFg+e0oCBzaXplKCB3aWR0aCwgaGVpZ2h0KVxyXG4gKi9cclxuY29tbWFuZHMuZ2V0THVhU2l6ZSA9IGFzeW5jIGZ1bmN0aW9uIChlbGVtZW50SWQpIHtcclxuICAgIHJldHVybiBhd2FpdCB0aGlzLnRlc3RidW5kbGUuc2VuZEFjdGlvbihcImVsZW1lbnQ6Z2V0U2l6ZVwiLCB7ZWxlbWVudElkfSk7XHJcbn1cclxuXHJcbmhlbHBlcnMuc2V0THVhRWxlbWVudFZhbHVlID0gYXN5bmMgZnVuY3Rpb24gKGtleXMsIGVsZW1lbnRJZCwgcmVwbGFjZSA9IGZhbHNlKSB7XHJcbiAgICBsZXQgdGV4dCA9IGtleXM7XHJcbiAgICBpZiAoa2V5cyBpbnN0YW5jZW9mIEFycmF5KSB7XHJcbiAgICAgICAgdGV4dCA9IGtleXMuam9pbihcIlwiKTtcclxuICAgIH1cclxuICAgIGxldCBwYXJhbXMgPSB7XHJcbiAgICAgICAgZWxlbWVudElkLFxyXG4gICAgICAgIHRleHQsXHJcbiAgICAgICAgcmVwbGFjZSxcclxuICAgICAgICB1bmljb2RlS2V5Ym9hcmQ6IHRoaXMub3B0cy51bmljb2RlS2V5Ym9hcmRcclxuICAgIH07XHJcbiAgICByZXR1cm4gYXdhaXQgdGhpcy50ZXN0YnVuZGxlLnNlbmRBY3Rpb24oXCJlbGVtZW50OnNldFRleHRcIiwgcGFyYW1zKTtcclxufTtcclxuXHJcblxyXG5cclxuT2JqZWN0LmFzc2lnbihjb21tYW5kcywgaGVscGVycyk7XHJcbmV4cG9ydCBkZWZhdWx0IGNvbW1hbmRzO1xyXG4iXSwic291cmNlUm9vdCI6Ii4uLy4uLy4uLy4uIn0=
