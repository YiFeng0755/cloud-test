"use strict";

var through = require('through2'),
    EE = require('events').EventEmitter;

module.exports = function (pipeFn) {
  var inStream = through.obj();
  var outStream = pipeFn(inStream);
  var combinedStream = new EE(); // not a real stream, just pretending
  combinedStream.on('pipe', function (source) {
    source.unpipe(this);
    source.pipe(inStream);
  });
  combinedStream.pipe = function (dest, options) {
    return outStream.pipe(dest, options);
  };
  return combinedStream;
};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9zdHJlYW0tY29tYmluZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxDQUFDOztBQUViLElBQUksT0FBTyxHQUFHLE9BQU8sQ0FBQyxVQUFVLENBQUM7SUFDN0IsRUFBRSxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQyxZQUFZLENBQUM7O0FBR3hDLE1BQU0sQ0FBQyxPQUFPLEdBQUcsVUFBVSxNQUFNLEVBQUU7QUFDakMsTUFBSSxRQUFRLEdBQUcsT0FBTyxDQUFDLEdBQUcsRUFBRSxDQUFDO0FBQzdCLE1BQUksU0FBUyxHQUFHLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUNqQyxNQUFJLGNBQWMsR0FBRyxJQUFJLEVBQUUsRUFBRSxDQUFDO0FBQzlCLGdCQUFjLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxVQUFVLE1BQU0sRUFBRTtBQUMxQyxVQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ3BCLFVBQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7R0FDdkIsQ0FBQyxDQUFDO0FBQ0gsZ0JBQWMsQ0FBQyxJQUFJLEdBQUcsVUFBVSxJQUFJLEVBQUUsT0FBTyxFQUFFO0FBQzdDLFdBQU8sU0FBUyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsT0FBTyxDQUFDLENBQUM7R0FDdEMsQ0FBQztBQUNGLFNBQU8sY0FBYyxDQUFDO0NBQ3ZCLENBQUMiLCJmaWxlIjoibGliL3N0cmVhbS1jb21iaW5lci5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5sZXQgdGhyb3VnaCA9IHJlcXVpcmUoJ3Rocm91Z2gyJyksXG4gICAgRUUgPSByZXF1aXJlKCdldmVudHMnKS5FdmVudEVtaXR0ZXI7XG5cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAocGlwZUZuKSB7XG4gIGxldCBpblN0cmVhbSA9IHRocm91Z2gub2JqKCk7XG4gIGxldCBvdXRTdHJlYW0gPSBwaXBlRm4oaW5TdHJlYW0pO1xuICBsZXQgY29tYmluZWRTdHJlYW0gPSBuZXcgRUUoKTsgLy8gbm90IGEgcmVhbCBzdHJlYW0sIGp1c3QgcHJldGVuZGluZ1xuICBjb21iaW5lZFN0cmVhbS5vbigncGlwZScsIGZ1bmN0aW9uIChzb3VyY2UpIHtcbiAgICBzb3VyY2UudW5waXBlKHRoaXMpO1xuICAgIHNvdXJjZS5waXBlKGluU3RyZWFtKTtcbiAgfSk7XG4gIGNvbWJpbmVkU3RyZWFtLnBpcGUgPSBmdW5jdGlvbiAoZGVzdCwgb3B0aW9ucykge1xuICAgIHJldHVybiBvdXRTdHJlYW0ucGlwZShkZXN0LCBvcHRpb25zKTtcbiAgfTtcbiAgcmV0dXJuIGNvbWJpbmVkU3RyZWFtO1xufTtcbiJdLCJzb3VyY2VSb290IjoiLi5cXC4uIn0=
